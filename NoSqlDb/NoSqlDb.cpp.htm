<!DOCTYPE html><html><head>
<!-------------HTML Prologue------------!>
<!---Published By: Akshay , 708 S Beech Street , Syracuse .--!>
<!----------------------(315)-289-0056----------------------!>
<!----Package Name:C:\Users\Ringo\Documents\Visual Studio 2017\Projects\oodp26\NoSqlDb\NoSqlDb.cpp-----!>
<!-------Published on :04:04:2017 15:35:09-----!>
<link rel=stylesheet type=text/css href="./../Stylesheet.css"/></head> <div class = indent><h4>Dependencies:</h4><a href = "C:\Users\Ringo\Documents\Visual Studio 2017\Projects\oodp26\oodp26\Executive.cpp.htm">C:\Users\Ringo\Documents\Visual Studio 2017\Projects\oodp26\oodp26\Executive.cpp</a><br><a href = "C:\Users\Ringo\Documents\Visual Studio 2017\Projects\oodp26\NoSqlDb\NoSqlDb.h.htm">C:\Users\Ringo\Documents\Visual Studio 2017\Projects\oodp26\NoSqlDb\NoSqlDb.h</a><br><a href = "C:\Users\Ringo\Documents\Visual Studio 2017\Projects\oodp26\AbstractSyntaxTree\AbstractSyntaxTree.cpp.htm">C:\Users\Ringo\Documents\Visual Studio 2017\Projects\oodp26\AbstractSyntaxTree\AbstractSyntaxTree.cpp</a><br><a href = "C:\Users\Ringo\Documents\Visual Studio 2017\Projects\oodp26\GrammerHelpers\GrammerHelpers.cpp.htm">C:\Users\Ringo\Documents\Visual Studio 2017\Projects\oodp26\GrammerHelpers\GrammerHelpers.cpp</a><br><a href = "C:\Users\Ringo\Documents\Visual Studio 2017\Projects\oodp26\ScopeStack\ScopeStack.cpp.htm">C:\Users\Ringo\Documents\Visual Studio 2017\Projects\oodp26\ScopeStack\ScopeStack.cpp</a><br><a href = "C:\Users\Ringo\Documents\Visual Studio 2017\Projects\oodp26\Cpp11-BlockingQueue\Cpp11-BlockingQueue.cpp.htm">C:\Users\Ringo\Documents\Visual Studio 2017\Projects\oodp26\Cpp11-BlockingQueue\Cpp11-BlockingQueue.cpp</a><br> </div></hr><pre>/////////////////////////////////////////////////////////////////////
// NoSqlDb.cpp - key/value pair in-memory database                 //
//                                                                 //
// Jim Fawcett, CSE687 - Object Oriented Design, Spring 2017       //
/////////////////////////////////////////////////////////////////////
#define _CRT_SECURE_NO_WARNINGS
#include "NoSqlDb.h"
#include &lt;iostream&gt;
#include&lt;ctime&gt;
#include&lt;iomanip&gt;
using StrData = std::string;
using intData = int;
using Key = NoSqlDb&lt;StrData&gt;::Key;
using Keys = NoSqlDb&lt;StrData&gt;::Keys;
#ifdef  test_nosqldb

//  test_nosqldb stub

int main()
<details><summary>{</summary>


	NoSqlDb&lt;StrData&gt; db;
	//time_t t;
	Element&lt;StrData&gt; elem1;
	elem1.name = "Convert";
	elem1.category = "Utility library";
	elem1.data = "Helps Conversion to strings";
	elem1.description = "Helps Conversion to strings";
	elem1.timeDate = "";
	elem1.childrel = { "Utilities" };
	time_t now = time(NULL);
	struct tm* timex = std::localtime(&now);
	char buffer[32];
	std::strftime(buffer, 32, "%d:%m:%Y %H:%M:%S", timex);
	elem1.timeDate = buffer;
	db.save(elem1.name, elem1);

	Element&lt;StrData&gt; elem2;
	elem2.name = "CppProperties";
	elem2.category = "Utility library";
	elem2.data = "C# properties in C++";
	elem2.description = "C# properties in C++";
	elem2.timeDate = "";
	now = time(NULL);
	timex = std::localtime(&now);
	std::strftime(buffer, 32, "%d:%m:%Y %H:%M:%S", timex);
	elem2.timeDate = buffer;
	db.save(elem2.name, elem2);
	//melem3

	Element&lt;StrData&gt; elem3;
	elem3.name = "NoSqlDb";
	elem3.category = "NoSql Database";
	elem3.data = "Main package which defines NoSql db functions";
	elem3.description = "Main package which defines NoSql db functions";
	elem3.timeDate = "";
	elem3.childrel = { "Convert","XmlDocument","CppProperties" };
	now = time(NULL);
	timex = std::localtime(&now);
	std::strftime(buffer, 32, "%d:%m:%Y %H:%M:%S", timex);
	elem3.timeDate = buffer;
	db.save(elem3.name, elem3);

	Element&lt;StrData&gt; elem4;
	elem4.name = "Utilities";
	elem4.category = "Utility library";
	elem4.data = "Provides utility functions for Convert Package";
	elem4.description = "Provides utility functions for Convert Package";
	elem4.timeDate = "";
	now = time(NULL);
	timex = std::localtime(&now);
	std::strftime(buffer, 32, "%d:%m:%Y %H:%M:%S", timex);
	elem4.timeDate = buffer;
	//elem4.childrel={""}
	db.save(elem4.name, elem4);

	Element&lt;StrData&gt; elem5;
	elem5.name = "XmlDocument";
	elem5.category = "Xml Library";
	elem5.data = "Xml library for conversion to and from XML document";
	elem5.description = "Xml library for conversion to and from XML document";
	elem5.timeDate = "";
	now = time(NULL);
	timex = std::localtime(&now);
	elem5.childrel = { "Utilities" };
	std::strftime(buffer, 32, "%d:%m:%Y %H:%M:%S", timex);
	elem5.timeDate = buffer;
	db.save(elem5.name, elem5);

	Element&lt;StrData&gt; elem6;
	elem6.name = "TestExecutive";
	elem6.category = "Executive";
	elem6.data = "Shows all the requirements of the project";
	elem6.description = "Shows all the requirements of the project";
	elem6.timeDate = "";
	elem6.childrel = { "NoSqlDb" };
	now = time(NULL);
	timex = std::localtime(&now);
	std::strftime(buffer, 32, "%d:%m:%Y %H:%M:%S", timex);
	elem6.timeDate = buffer;
	db.save(elem6.name, elem6);


	std::cout &lt;&lt; "\n  Retrieving elements from NoSqlDb&lt;string&gt;";
	std::cout &lt;&lt; "\n ------------------------------------------\n";

	std::cout &lt;&lt; "\n  size of db = " &lt;&lt; db.count() &lt;&lt; "\n";
	Keys keys = db.keys();
	for (Key key : keys)
<details><summary>	{</summary>
		std::cout &lt;&lt; "\n  " &lt;&lt; key &lt;&lt; ":";
		std::cout &lt;&lt; db.value(key).show();
</details>	}
	std::cout &lt;&lt; "\n\n";
	/*QueryEngine&lt;StrData&gt; QE;
	QE.speckey(db, "elem1");
	std::cout &lt;&lt; "\n Searching for 1 in itmes";
	QE.itemstr(db, "1");
	std::cout &lt;&lt; "\n\nSearching keys where child is abc\n";
	QE.childkey(db, "abc");
	std::cout &lt;&lt; "\n Data string\n";
	QE.datastr(db, "elem1's");
	QE.regExstr(db, "name","([A-Z]*[a-z])+1");
	QE.timestr(db, "ac", "asd");*/
	std::string a = "alysdfd";
	std::move(a);
	std::string docx;
	DBWrapper&lt;std::string&gt; doc(db);
	docx = doc.save();
	std::cout &lt;&lt; doc.save();
	NoSqlDb&lt;std::string&gt; test;
	DBWrapper&lt;std::string&gt; newwrap;
	NoSqlDb&lt;std::string&gt; temp;
	temp = newwrap.restore("test.xml");
	Keys ks = temp.keys();

	std::cout &lt;&lt; "\n restoring from file\n\n";
	for (Key key : ks)
<details><summary>	{</summary>
		std::cout &lt;&lt; "\n  " &lt;&lt; key &lt;&lt; ":";
		std::cout &lt;&lt; temp.value(key).show();
</details>	}




	//std::cout&lt;&lt;
	/*std::cout &lt;&lt; "\n  Creating and saving NoSqlDb elements with int data";
	std::cout &lt;&lt; "\n ----------------------------------------------------\n";
	11
	NoSqlDb&lt;intData&gt; idb;

	Element&lt;intData&gt; ielem1;
	ielem1.name = "elem1";
	ielem1.category = "test";
	ielem1.data = 1;

	idb.save(ielem1.name, ielem1);

	Element&lt;intData&gt; ielem2;
	ielem2.name = "elem2";
	ielem2.category = "test";
	ielem2.data = 2;

	idb.save(ielem2.name, ielem2);

	Element&lt;intData&gt; ielem3;
	ielem3.name = "elem3";
	ielem3.category = "test";
	ielem3.data = 3;

	idb.save(ielem3.name, ielem3);

	Element&lt;intData&gt; ielem4;
	ielem3.name = "elem4";
	ielem3.category = "test";
	ielem3.data = 4;

	idb.save(ielem3.name, ielem3);

	std::cout &lt;&lt; "\n  Retrieving elements from NoSqlDb&lt;int&gt;";
	std::cout &lt;&lt; "\n ---------------------------------------\n";

	std::cout &lt;&lt; "\n  size of idb = " &lt;&lt; idb.count() &lt;&lt; "\n";
	Keys ikeys = idb.keys();
	for (Key key : ikeys)
<details><summary>	{</summary>
	std::cout &lt;&lt; "\n  " &lt;&lt; key &lt;&lt; ":";
	std::cout &lt;&lt; idb.value(key).show();
</details>	}
	std::cout &lt;&lt; "\n\n";*/
</details>}
#endif
</pre></body></html>